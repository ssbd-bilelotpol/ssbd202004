CustomerServiceOrClient
TicketsPanelPage
TicketController
TicketEndpoint
TicketService
TicketFacade
Ticket
@Starter(CustomerServiceOrClient)
if(validData) {
  displaySuccess = TicketsPanelPage.returnTicket(ticketDto) {
    successResponse = TicketController.returnTicket(ticketDto) {
       successResponse = TicketEndpoint.returnTicket(ticketDto) {
        //RW, Read Committed
        while(1) {
          success = TicketService.returnTicket(ticketId) {
            ticket = TicketFacade.findById(ticketId)
            success = TicketFacade.remove(ticket)

            success = ConnectionService.calculateConnectionProfit() {
              connection = ConnectionFacade.find(connectionId)
              tickets = TicketFacade.find(connectionId)
              calculate()
              Connection.setProfit(profit)
              success = ConnectionFacade.edit(connection)
            }
          }
        }
      }
    }

  }
}
else if(timeToReturnExpired) {
  displayError = TicketsPanelPage.returnTicket(ticket) {
    errorDeadlineExceeded = TicketController.returnTicket(ticket) {
      errorDeadlineExceeded = TicketEndpoint.returnTicket(ticket) {
        //RW, Read Committed
        while(1) {
          error = TicketService.returnTicket(ticketId) {
            ticket = TicketFacade.findById(ticketId)
          }
        }
      }
    }

  }
}